"use strict";var Pixelart=function(){function t(t,i,o){return this._ensureDefined(["target",t],["ascii",i]),this.ascii=i,this.target=t.jquery?t[0]:t,this.options=o,this._cleanOptions(),this}function i(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),o=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null;if(!o)throw new Error("Invalid color: "+t);return o}function o(t){return"rgb("+t.r+", "+t.g+", "+t.b+")"}return t.prototype._ensureDefined=function(){Array.prototype.slice.call(arguments).forEach(function(t){if(void 0===t[1])throw new Error("required argument "+t[0])})},t.prototype._cleanOptions=function(){this.options||(this.options={}),this.options={pixelSize:this.options.pixelSize||10,color:this.options.color?i(this.options.color):{r:0,g:0,b:0},colorMap:this.options.colorMap?this._buildColorMap(this.options.colorMap):null}},t.prototype._buildColorMap=function(t){var o={};return Object.keys(t).forEach(function(n){o[n]=i(t[n])}),o},t.prototype.cols=function(){var t=0;return this._iterateRows(function(i){i.length>t&&(t=i.length)}),t},t.prototype.rows=function(){return this.ascii.length},t.prototype.width=function(){return this.cols()*this.options.pixelSize},t.prototype.height=function(){return this.rows()*this.options.pixelSize},t.prototype._createCanvas=function(){var t=document.createElement("canvas");return t.width=this.width(),t.height=this.height(),t},t.prototype._iterateRows=function(t){var i=this;this.ascii.forEach(function(o,n){t.apply(i,[o,n])})},t.prototype._iterate=function(t){var i=this;this._iterateRows(function(o,n){this.ascii[n].split("").forEach(function(o,r){t.apply(i,[o,r,n])})})},t.prototype.color=function(){return this.options.color},t.prototype.draw=function(){var t=this._createCanvas(),i=t.getContext("2d");return this._iterate(function(t,n,r){" "!==t&&(i.fillStyle=o(this.options.colorMap&&t in this.options.colorMap?this.options.colorMap[t]:this.options.color),i.fillRect(n*this.options.pixelSize,r*this.options.pixelSize,this.options.pixelSize,this.options.pixelSize))}),this.target.appendChild(t),this},t}();